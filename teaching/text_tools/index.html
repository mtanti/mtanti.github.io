<!DOCTYPE html>
<html>
<head>
    <title>Text Tools v0.1.0</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial;
            margin: 20px;
        }
        p, table, h3, code {
            margin: 10px;
        }
        table {
            border-collapse: collapse;
        }
        td, th {
            border: solid 1px black;
            padding: 5px;
        }
        ol, ul {
            list-style-position: outside;
        }
    </style>
    <script>
        var $loaded = false;
        
        function onload() {
            const $script = document.createElement('script');
            $script.onload = function() {
                document.getElementById('loading').remove();
                $loaded = true;
            };
            $script.src = 'data.js';
            document.head.appendChild($script);
        }
        
        function tokenFreqs() {
            if (!$loaded) {
                return;
            }
            
            const $tokens = document.getElementById('token_freqs_text').value.toLowerCase().split(/[^a-z]+/)
            let $freqs = {};
            for (let $i = 0; $i < $tokens.length; $i++) {
                const $token = $tokens[$i];
                if ($token != '' && !($token in $stopWords)) {
                    if (!($token in $freqs)) {
                        $freqs[$token] = 0;
                    }
                    $freqs[$token] += 1;
                }
            }
            
            let $sortList = [];
            for (let $token in $freqs) {
                $sortList.push([$token, $freqs[$token]]);
            }
            $sortList.sort(($a, $b) => {
                if ($a[1] > $b[1]) return -1;
                else if ($a[1] < $b[1]) return 1;
                else if ($a[0] > $b[0]) return 1;
                else if ($a[0] < $b[0]) return -1;
                else return 0;
            });
            
            let $output = '';
            for (let $i = 0; $i < $sortList.length; $i++) {
                $output += $sortList[$i][0] + '\t' + $sortList[$i][1] + '\n';
            }
            document.getElementById('token_freqs_result').value = $output;
        }
        
        function relatedTokens() {
            if (!$loaded) {
                return;
            }
            
            const $token = document.getElementById('related_tokens_token').value;
            let $output = '';
            const $index = $lemmas.indexOf($token);
            if ($index != -1) {
                for (let $i = 0; $i < $relations[$index].length; $i++) {
                    $output += $lemmas[$relations[$index][$i]] + '\n';
                }
            }
            document.getElementById('related_tokens_result').value = $output;
        }
    </script>
</head>
<body onload="onload();">

<h1>Text Tools v0.1.0</h1>

<div id="loading" style="font-size:20pt;">Loading...</div>

<h2>Word frequencies without stop words</h2>
<form>
    <textarea id="token_freqs_text" style="width:50%; height:100px;"></textarea><br />
    <input type="button" value="Get word frequencies" onclick="tokenFreqs();" /><br /><br />
    <textarea id="token_freqs_result" readonly="readonly" style="width:50%; height:100px;"></textarea>
</form>
<p>Stop word list taken from <a href="https://github.com/igorbrigadir/stopwords">Igor Brigadir's GitHub</a>.</p>

<h2>Related words</h2>
<form>
    <input type="text" id="related_tokens_token"></textarea><br />
    <input type="button" value="Get related words" onclick="relatedTokens();" /><br /><br />
    <textarea id="related_tokens_result" readonly="readonly" style="width:50%; height:100px;"></textarea>
</form>
<p>Words taken from <a href="https://wordnet.princeton.edu">WordNet</a>.</p>

</body>
</html>